<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Hours - Track Your Goal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Inter', 'Helvetica Neue', serif;
            background-color: #fefdf8;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.8;
            color: #444;
        }

        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .page {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 40px;
        }

        .page.active {
            opacity: 1;
            transform: translateY(0);
        }

        .page.hidden {
            display: none;
        }

        /* Page 1 - Goal Input */
        .goal-form {
            text-align: center;
            max-width: 280px;
            width: 100%;
        }

        h1 {
            font-size: 1.8rem;
            font-weight: 200;
            color: #2a2a2a;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
            line-height: 1.3;
        }

        .subtext {
            font-size: 0.8rem;
            color: #767676;
            margin-bottom: 2rem;
            font-weight: 300;
            line-height: 1.6;
        }

        .dream-input {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 1px solid #d4d4d4;
            padding: 0.8rem 0 0.5rem 0;
            font-size: 0.9rem;
            color: #333;
            text-align: center;
            outline: none;
            transition: all 0.8s ease;
            font-family: inherit;
            font-weight: 300;
            margin-bottom: 1.5rem;
        }

        .dream-input::placeholder {
            color: #bbb;
            font-weight: 300;
        }

        .dream-input:focus {
            border-bottom-color: #999;
            transform: translateY(-2px);
        }

        .dreamy-date {
            width: 100%;
            background: rgba(248, 248, 248, 0.5);
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            padding: 0.8rem 1rem;
            font-size: 0.8rem;
            color: #555;
            text-align: center;
            outline: none;
            transition: all 0.6s ease;
            font-family: inherit;
            font-weight: 300;
            margin-bottom: 1.5rem;
            backdrop-filter: blur(5px);
        }

        .dreamy-date:focus {
            border-color: #bbb;
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-1px);
        }

        .dream-button {
            background: transparent;
            color: #666;
            border: 1px solid #ddd;
            padding: 0.6rem 1.5rem;
            font-size: 0.75rem;
            font-weight: 300;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.6s ease;
            font-family: inherit;
            letter-spacing: 0.5px;
        }

        .dream-button:hover {
            border-color: #bbb;
            color: #444;
            transform: translateY(-1px);
        }

        /* Page 2 - Countdown */
        .countdown-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            width: 100%;
            height: 100%;
        }

        .goal-whisper {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 2rem;
            font-weight: 300;
            letter-spacing: 0.3px;
            text-align: center;
            max-width: 400px;
        }

        .countdown-display {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 2rem;
            justify-content: center;
        }

        .time-row {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 0.3rem;
        }

        .time-number {
            font-size: 1.8rem;
            font-weight: 600;
            color: #333;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
        }

        .time-label {
            font-size: 0.65rem;
            font-weight: 300;
            color: #999;
            text-transform: lowercase;
            letter-spacing: 0.5px;
        }

        .countdown-reminder {
            margin-top: 2rem;
            font-size: 0.7rem;
            color: #aaa;
            font-style: italic;
            font-weight: 300;
            text-align: center;
            max-width: 350px;
        }

        /* Page 3 - End Message */
        .end-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            width: 100%;
            height: 100%;
        }

        .end-poetry {
            font-size: 1.4rem;
            color: #555;
            line-height: 1.8;
            font-weight: 200;
            letter-spacing: 0.3px;
            text-align: center;
            white-space: pre-line;
            max-width: 450px;
            margin-bottom: 3rem;
        }

        .new-goal-button {
            background: transparent;
            color: #666;
            border: 1px solid #ddd;
            padding: 0.7rem 1.8rem;
            font-size: 0.8rem;
            font-weight: 300;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.6s ease;
            font-family: inherit;
            letter-spacing: 0.5px;
        }

        .new-goal-button:hover {
            border-color: #bbb;
            color: #444;
            transform: translateY(-1px);
        }

        @media (max-width: 600px) {
            .goal-form {
                max-width: 250px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .subtext {
                font-size: 0.7rem;
            }

            .countdown-display {
                gap: 1.2rem;
            }

            .time-number {
                font-size: 1.5rem;
            }

            .time-label {
                font-size: 0.6rem;
            }

            .end-poetry {
                font-size: 1.2rem;
                padding: 0 1rem;
            }
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .breathing {
            animation: breathe 4s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Page 1: Goal Input -->
        <div id="goal-input-page" class="page">
            <div class="goal-form breathing">
                <h1>What's one goal you want to focus on?</h1>
                <p class="subtext">Think of a goal that matters to you. Write it down, choose a day, and let time help you keep it alive. Let each passing second be a quiet encouragement to keep moving forward.</p>
                
                <input type="text" id="goal-input" class="dream-input" placeholder="enter your goal…" />
                <input type="date" id="date-input" class="dreamy-date" />
                <button class="dream-button" onclick="startTracking()">start tracking</button>
            </div>
        </div>

        <!-- Page 2: Countdown Timer -->
        <div id="countdown-page" class="page hidden">
            <div class="countdown-container">
                <div id="goal-display" class="goal-whisper"></div>
                
                <div class="countdown-display">
                    <div class="time-row">
                        <span class="time-number" id="days">00</span>
                        <span class="time-label">days</span>
                    </div>
                    <div class="time-row">
                        <span class="time-number" id="hours">00</span>
                        <span class="time-label">hours</span>
                    </div>
                    <div class="time-row">
                        <span class="time-number" id="minutes">00</span>
                        <span class="time-label">minutes</span>
                    </div>
                    <div class="time-row">
                        <span class="time-number" id="seconds">00</span>
                        <span class="time-label">seconds</span>
                    </div>
                </div>
                
                <p class="countdown-reminder">Stay with it. Every second counts toward the outcome you deserve.</p>
            </div>
        </div>

        <!-- Page 3: End Message -->
        <div id="end-page" class="page hidden">
            <div class="end-container">
                <div class="end-poetry" id="end-message"></div>
                <button class="new-goal-button" onclick="resetGoal()">new goal</button>
            </div>
        </div>
    </div>

    <script>
        let countdownInterval;
        
        const endMessages = [
            "You stayed with it.\nNow the journey continues —\nstronger, wiser, and ready for what's next.",
            "The moment has arrived.\nYou showed up, stayed present,\nand grew through every second.",
            "Time transforms everything.\nYou embraced the process,\nand now you're exactly where you need to be."
        ];

        // LocalStorage functions
        function saveToStorage(goal, endDate) {
            const data = {
                goal: goal,
                endDate: endDate,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('seedHoursGoal', JSON.stringify(data));
        }

        function loadFromStorage() {
            const stored = localStorage.getItem('seedHoursGoal');
            if (!stored) return null;
            
            try {
                return JSON.parse(stored);
            } catch (e) {
                console.error('Error parsing stored data:', e);
                return null;
            }
        }

        function clearStorage() {
            localStorage.removeItem('seedHoursGoal');
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
                setTimeout(() => {
                    page.classList.add('hidden');
                }, 600);
            });

            // Show target page
            setTimeout(() => {
                const targetPage = document.getElementById(pageId);
                targetPage.classList.remove('hidden');
                setTimeout(() => {
                    targetPage.classList.add('active');
                }, 100);
            }, 600);
        }

        function startTracking() {
            const goal = document.getElementById('goal-input').value.trim();
            const dateInput = document.getElementById('date-input').value;
            
            if (!goal) {
                return;
            }
            
            if (!dateInput) {
                return;
            }
            
            const targetDate = new Date(dateInput);
            const now = new Date();
            
            if (targetDate <= now) {
                return;
            }
            
            // Save to localStorage
            saveToStorage(goal, targetDate.toISOString());
            
            displayCountdown(goal, targetDate);
            showPage('countdown-page');
        }

        function displayCountdown(goal, endDate) {
            document.getElementById('goal-display').textContent = goal;
            
            function updateCountdown() {
                const now = new Date().getTime();
                const target = new Date(endDate).getTime();
                const difference = target - now;
                
                if (difference <= 0) {
                    clearInterval(countdownInterval);
                    clearStorage(); // Clear storage when goal is complete
                    showEndMessage();
                    return;
                }
                
                const days = Math.floor(difference / (1000 * 60 * 60 * 24));
                const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((difference % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            }
            
            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
        }

        function showEndMessage() {
            const randomMessage = endMessages[Math.floor(Math.random() * endMessages.length)];
            document.getElementById('end-message').textContent = randomMessage;
            showPage('end-page');
        }

        function resetGoal() {
            clearInterval(countdownInterval);
            clearStorage();
            
            // Reset form
            document.getElementById('goal-input').value = '';
            document.getElementById('date-input').value = '';
            
            showPage('goal-input-page');
        }

        // Initialize and check for existing goal
        function initializeApp() {
            // Set minimum date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('date-input').min = tomorrow.toISOString().split('T')[0];
            
            // Check for existing goal in storage
            const storedData = loadFromStorage();
            if (storedData) {
                const endDate = new Date(storedData.endDate);
                const now = new Date();
                
                // If the goal hasn't expired, resume countdown
                if (endDate > now) {
                    displayCountdown(storedData.goal, endDate);
                    showPage('countdown-page');
                    return;
                } else {
                    // Goal has expired, clear storage and show end message
                    clearStorage();
                    showEndMessage();
                    return;
                }
            }
            
            // No stored goal, show input page
            showPage('goal-input-page');
        }

        // Initialize app when page loads
        window.addEventListener('load', initializeApp);

        // Add enter key support
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !document.getElementById('goal-input-page').classList.contains('hidden')) {
                startTracking();
            }
        });
    </script>
</body>
</html>
